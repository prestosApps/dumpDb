<!doctype html>
<html>
<head>
    <title>DumpDb</title>
    <link rel="stylesheet" type="text/css" href="jquery.dataTables.min.css">
    <style>
        body{
            font-family: Arial, sans-serif;
            width:90%;
            margin:auto;
        }
        .header{
            text-align: center;
            background-color: #6a8df2;
            color: #ffffff;
            padding: 4px;
            border-radius:8px;
            margin-top:16px;
        }
        .panel{
            background-color: #eeeeee;
            border-style: solid;
            border-width: 1px;
            border-color: #dddddd;
            border-radius:4px;
        }
        .panel-header{
            font-weight: bold;
            padding: 4px;
            background-color: #dddddd;
        }
        .panel-row{
        }
    </style>
</head>
<body>
    <script src="external/jquery/jquery.js"></script>
    <script src="jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function(){
            $.ajax({
               url: "http://192.168.1.245/cgi-bin/test.py",
               type: "GET",
               dataType: "text",
               success: function(response){
                   responseArray = response.split(",");
                   $("#totalSoFar").text(responseArray[0]);
                   $("#aircraftSeenToday").text(responseArray[1]);
                   $("#lastUpdated").text(responseArray[2]);
               }
            });

            $.ajax({
               url: "http://192.168.1.245/cgi-bin/status.py",
               type: "GET",
               dataType: "text",
               success: function(response){
                   responseArray = response.split(",");
                   $("#dump1090Info").text("Dump1090 " + responseArray[0]);
                   $("#dump1090Uptime").text("Running since: " + responseArray[1]);
                   $("#imgDiv").prepend('<img src="images/tick.png"/>');
               }
            });

            $.ajax({
                url: "http://192.168.1.245/cgi-bin/thing.py",
                type: "GET",
                dataType: "json",
                success: function(response){
                    console.log(response);
                    $('#aircraftTable').DataTable( {
                        data: response,
                        columns: [{data: 0,
                                   "render": function (data, type, full, meta) {
                                       return '<a href ="#' + data + '">' + data.toUpperCase() + '</a>';
                                   }
                                  },
                                  {data: 1}]
                    });
                }
            });
        });
    </script>
    <div class="header">
        <h1>DumpDb</h1>
    </div>

    <div class="panel" style="margin-top:16px;">
        <div class="panel-header">
            Status
        </div>
        <div style="padding:20px; overflow: hidden;">
            <div style="float: left; width: 2%;" id="imgDiv"></div>
            <div>
                <div id="dump1090Info" style="padding:2px;"></div>
                <div style="font-size:0.75em; padding:2px;" id="dump1090Uptime"></div>
            </div>
        </div>
    </div>

    <div class="panel" style="margin-top:16px;">
        <div class="panel-header">
            Aircraft Data
        </div>
        <div class="panel-row" style="padding:20px;">
            <div style="float:left; font-size:1.25em; width:30%">
                Aircraft seen today:
            </div>
            <div style="font-size: 2.5em;" id="aircraftSeenToday">
            </div>
        </div>
        <div class="panel-row" style="padding:20px;">
            <div style="float:left; font-size:1.25em; width:30%;">
                Total aircraft seen so far:
            </div>
            <div style="font-size: 2.5em;" id="totalSoFar">
            </div>
        </div>
        <div class="panel-row" style="padding-left:20px; padding-bottom:4px;">
            <div style="float:left; font-size:0.75em;">
                Last updated:
            </div>
            <div style="font-size: 0.75em;" id="lastUpdated">
            </div>
        </div>
    </div>

    <div class="panel" style="margin-top:16px; padding:4px;">
        <table id="aircraftTable" class="display">
            <thead>
                <tr>
                    <th>Hexcode</th>
                    <th>Occurences</th>
                </tr>
            </thead>
        </table>
    </div>
</body>
</html>

